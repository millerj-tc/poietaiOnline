<head>   
    <script type="module">
        import {poemCreatorDisplayFlow} from './poemCreator/poemCreatorDisplayBuild/poemCreatorDisplayFlow.js';
        window.poemCreatorDisplayFlow = poemCreatorDisplayFlow;
        import {Login,Register,TestLoginMe} from "./firebase/firebaseAuth.js";
        window.Login = Login;
        window.TestLoginMe = TestLoginMe;
        window.Register = Register;
        import {MemorizePoemFlow} from "./poemCreator/memorizePoem/memorizePoemFlow.js";
        window.MemorizePoemFlow = MemorizePoemFlow;
        import {TogglePoemCreatorOutputCollapsed} from "./poemCreator/poemCreatorUtils.js";
        window.TogglePoemCreatorOutputCollapsed = TogglePoemCreatorOutputCollapsed;
        import {LoginFlow} from "./firebase/loginFlow.js";
        window.LoginFlow = LoginFlow;
        import {ReciteCreateToggleFlow} from "./reciteCreateToggleFlow.js";
        window.ReciteCreateToggleFlow = ReciteCreateToggleFlow;
        import {gameHandler} from "./gameHandler.js";
        window.gameHandler = new gameHandler();
    </script>
</head>
<link rel="stylesheet" type="text/css" href="style.css"/>
<div class="cssPoemCreatorGrid" id="poemCreatorGrid">
</div>
<div class="cssPoemCreatorOutputTray" id="poemCreatorOutputTray">
    <div class="cssPoemCreatorOutputWrapper">
        <div class="cssPoemCreatorOutput" id="poemCreatorOutput"></div>
        <button class="poemCreatorOutputTrayButton" id="poemCreatorOutputCollapseToggler" onclick="TogglePoemCreatorOutputCollapsed()">\/</button>
        <button class="poemCreatorOutputTrayButton" id="memorizeCreatedPoemButton" onclick="MemorizePoemFlow()">Memorize</button>
        <button class="poemCreatorOutputTrayButton reciteCreateToggleFlowButton" onclick="ReciteCreateToggleFlow()">Recite</button>
    </div>
</div>
<div class="cssPoemReciterTrayWrapper">
    <div class="cssPoemReciterTray">
        <div class="cssPoemReciterDisplayWrapper">
            <div class = "cssPoemReciterDisplay"></div>
        </div>
    </div>
</div>
<button style="position:relative;top:300px"  onclick="poemCreatorDisplayFlow()">TEST</button><br>
<div class="loginWrapper" id="loginWrapper">    
    <div class="loginExisting">
        Existing User Login<br><br>
        <label for="existingUserEmail">Email:</label>
        <input type="text" id="existingUserEmail" name="existingUserEmail"><br><br>
        <label for="existingPass">Password:</label>
        <input type="password" id="existingPass" name="existingPass"><br><br>
        <button class="cssLoginButton" onclick="Login()">Login</button>
    </div>
    <div class="registerNew">
        Register New User<br><br>
        <label for="newUserEmail">Email:</label>
        <input type="text" id="newUserEmail" name="newUserEmail"><br><br>
        <label for="newUserPass">Password:</label>
        <input type="password" id="newUserPass" name="newUserPass"><br><br>
        <label for="newUserChar">Character name:</label>
        <input type="text" id="newUserChar" name="newUserChar"><br><br>
        <button class="cssRegisterButton" onclick="Register()">Register</button>
        
    </div>
</div>
<button style="position:relative;top:100px"  onclick="TestLoginMe()">LOGIN JOSEPH</button>

<script type="module">

  // Import the functions you need from the SDKs you need

  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";

  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-analytics.js";
            
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-database.js";

  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";

  // Your web app's Firebase configuration

  const firebaseConfig = {

    apiKey: "AIzaSyBvjgVPY_ZOM0hoEYc4ewSXFIdw17cFZCE",

    authDomain: "griot-games.firebaseapp.com",

    projectId: "griot-games",
      
    databaseURL: "https://griot-games-default-rtdb.firebaseio.com/",

    storageBucket: "griot-games.appspot.com",

    messagingSenderId: "225872980699",

    appId: "1:225872980699:web:5a2f4ee4f30bcde76cbafe",

    measurementId: "G-KZQ8J7P5E4"

  };


  // Initialize Firebase

  const app = initializeApp(firebaseConfig);

  const analytics = getAnalytics(app);
            
 const db = getDatabase(app);
    
    const auth = getAuth();
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in, see docs for a list of available properties
        // https://firebase.google.com/docs/reference/js/firebase.User
        window.uid = user.uid;
        console.log(window.uid + " login successful");
        LoginFlow();
      } else {
        // User is signed out
        // ...
      }
    });

</script>